<!DOCTYPE html>
<html>
<head>
  <link href="Client/static/welcome.less" rel="stylesheet/less" type="text/css" /> 
  <script src="Client/js/Third-Party/less-1.3.0.min.js"></script>
  <script src="Client/js/Third-Party/jquery-1.7.2.min.js"></script>
  <script src="Client/js/Third-Party/soundmanager2/soundmanager2.js"></script>
  
  <script src="game.js"></script>

</head>
<body>

  <div id="main"></div>
  <script>
  $(function(){
    //soundManager.useFastPolling = true;
    soundManager.setup({
      url: 'Client/js/Third-Party/soundmanager2/swf',
      useHighPerformance:true,
      flashVersion: 9,
      ontimeout: function(){ console.log("Sound manager failed to load."); },
      onready: function(){
        window.sound = soundManager.createSound({
          id : "try",
          url: 'Client/resources/short-news-jingle.mp3',
          autoLoad:true,
          autoPlay: false,
          multishot:false,
          volume:50,
          loops:1,
          onload:function(){
            console.log("Sound manager loaded sound successfully.");
          },
        });
        //soundManager.play("try")
      }
    });

    var scene = new Scene(
      $("#main"),
      {
        base:"/Client/resources/scene-bg.png", 
        items: [
          {
            id: "trash",
            offset: {x:180, y:160},
            img: "Client/resources/trash.png",
            size: {x:100, y:110}
          },
          {
            id: "hammer",
            offset: {x:120, y:180},
            img: "Client/resources/hammer.png",
            size: {x:80, y:80},
          },
          {
            id: "flowers",
            offset: {x:450, y:-12},
            img: "Client/resources/flowers.png",
            size: {x:60, y:90},
          },
          {
            id : "trophy",
            offset: {x:370, y:25},
            img: "Client/resources/trophy.png",
            size: {x:64, y:64},
          },
          {
            id: "potato", 
            offset: {x:460, y:140},
            img: "Client/resources/potato.png",
            size: {x: 60, y:40},
          },
          {
            id: "typewriter",
            offset: {x:360, y:105},
            img: "Client/resources/typewriter.png",
            size: {x:100, y:80},
          },
          {
            id: "clothing", 
            offset: {x:0, y:0},
            img: "Client/resources/clothing.png",
            size: {x:80, y:280},
          },
          {
            id: "ring",
            offset: {x:230,y:50},
            img: "Client/resources/ring.png",
            size: {x:32, y:32},
          },
          {
            id: "books",
            offset: {x:270, y:97},
            img: "Client/resources/books.png",
            size: {x:85, y:85},
          },
          {
            id: "wrecking", 
            offset: {x:512, y:200},
            img: "Client/resources/wrecking.png",
            size: {x:100, y:100},
          },
          {
            id: "bed", 
            offset: {x:0, y:300},
            img: "Client/resources/bed.png",
            size: {x:600, y:100},
          },
          {
            id: "bills",
            offset: {x:150, y:320},
            img: "Client/resources/bills.png",
            size: {x:120, y:80},
          },
          {
            id: "teddy",
            offset: {x:120, y:320},
            img: "Client/resources/teddy.png",
            size: {x:70, y:80},
          },
          {
            id: "knife", 
            offset: {x:150, y:320},
            img: "Client/resources/knife.png",
            size: {x:64, y:64},
          },
          {
            id: "housekey",
            offset: {x:200, y:320},
            img: "Client/resources/housekey.png",
            size: {x:48,y:48},
          },
          {
            id: "handcuffs",
            offset: {x:450, y:330},
            img: "Client/resources/handcuffs.png",
            size: {x:64, y:64},
          },
          {
            id: "vacuum",
            offset: {x:250, y:330},
            img: "Client/resources/vacuum.png",
            size: {x:168, y:80},
          },
        ],
        verses: [
          {
            verse:"*Sigh* I need to clear the <em>junk</em> out of this room...",
            items: {
              "flowers": { score: -1, feedback: "Who cares for this sentimental crap anyway."},
              "trash": { score: 0, feedback: "Well, that looks much cleaner now."}
            }
          },
          {
            verse:"I bought you these for your birthday, but you haven't been around much to enjoy them...",
            items: {
              "flowers": { score: 1, feedback:"So I made sure to send you a bouquet at work."},
              "clothing": { score: -1, feedack: "And you never seemed to like what I did to you while you wore them."}
            }
          },
        ],
        start: "This is our story",
        endings:[
          "I already look forward to our time together with our new arrival. What a family we'll make!",
          "With my promotion, we're able to move to a bigger place.",
          "I'm glad I did that, this room really needed a clean.",
          "I miss you. Without you, without a job, I'm not sure what's going to happen now",
          "They'll never find your body."
        ]

      }
    );

    
    $("#main").click(function(event){
      var os = $("#main").offset();
      var coords = {x:event.pageX-os.left, y:event.pageY-os.top}
      scene.next(coords);
      
    });


  });
  
  </script>


</body>
</html>
