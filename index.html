<!DOCTYPE html>
<html>
<head>
  <link href="Client/static/welcome.less" rel="stylesheet/less" type="text/css" /> 
  <script src="Client/js/Third-Party/less-1.3.0.min.js"></script>
  <script src="Client/js/Third-Party/jquery-1.7.2.min.js"></script>
  <script src="Client/js/Third-Party/soundmanager2/soundmanager2.js"></script>
  
  <script src="game.js"></script>

</head>
<body>

  <div id="main"></div>
  <script>
  $(function(){
    //soundManager.useFastPolling = true;
    soundManager.setup({
      url: 'Client/js/Third-Party/soundmanager2/swf',
      useHighPerformance:true,
      flashVersion: 9,
      ontimeout: function(){ console.log("Sound manager failed to load."); },
      onready: function(){
        window.sound = soundManager.createSound({
          id : "try",
          url: 'Client/resources/short-news-jingle.mp3',
          autoLoad:true,
          autoPlay: false,
          multishot:false,
          volume:50,
          loops:1,
          onload:function(){
            console.log("Sound manager loaded sound successfully.");
          },
        });
        //soundManager.play("try")
      }
    });

    var scene = new Scene(
      $("#main"),
      {
        base:"Client/resources/scene-bg.png", 
        items: [
          {
            id: "trash",
            offset: {x:180, y:160},
            img: "Client/resources/trash.png",
            size: {x:100, y:110}
          },
          {
            id: "hammer",
            offset: {x:120, y:180},
            img: "Client/resources/hammer.png",
            size: {x:80, y:80},
          },
          {
            id: "flowers",
            offset: {x:450, y:0},
            img: "Client/resources/flowers.png",
            size: {x:60, y:90},
          },
          {
            id : "trophy",
            offset: {x:370, y:25},
            img: "Client/resources/trophy.png",
            size: {x:64, y:64},
          },
          {
            id: "potato", 
            offset: {x:460, y:140},
            img: "Client/resources/potato.png",
            size: {x: 60, y:40},
          },
          {
            id: "typewriter",
            offset: {x:360, y:105},
            img: "Client/resources/typewriter.png",
            size: {x:100, y:80},
          },
          {
            id: "clothing", 
            offset: {x:0, y:0},
            img: "Client/resources/clothing.png",
            size: {x:80, y:280},
          },
          {
            id: "ring",
            offset: {x:230,y:50},
            img: "Client/resources/ring.png",
            size: {x:32, y:32},
          },
          {
            id: "books",
            offset: {x:270, y:97},
            img: "Client/resources/books.png",
            size: {x:85, y:85},
          },
          {
            id: "wrecking", 
            offset: {x:512, y:200},
            img: "Client/resources/wrecking.png",
            size: {x:100, y:100},
          },
          {
            id: "bed", 
            offset: {x:0, y:300},
            img: "Client/resources/bed.png",
            size: {x:600, y:100},
          },
          {
            id: "handcuffs",
            offset: {x:450, y:330},
            img: "Client/resources/handcuffs.png",
            size: {x:64, y:64},
          },
        ],
        verses: [
          {
            verse:"From this room I need<br/>To extract and erase trash.<br/>Delete an item.",
            items: {
              "flowers": { score: -1, feedback: "Who cares for this sentimental crap anyway?"},
              "ring": { score: -2, feedback: "Who cares for this sentimental crap anyway?"},
              "potato": { score: 0, feedback: "Well, that looks much cleaner now."},
              "trash": { score: 0, feedback: "Well, that looks much cleaner now."},
              "wrecking": { score: -1, feedback: "I never understood your attachment to that toy." },
            }
          },
 /*         {
            verse:"I gave this to you.<br/>So busy, you have had no<br/>Time to enjoy it.",
            items: {
              "books": {score: 0, feedback: "I suppose it's the thought that counts."},
              "flowers": {score: 1, feedback: "I made sure to send you a bouquet at work."},
              "clothing": {score: -1, feedback: "And you never seemed to like what I did to you when you wore it."},
              "handcuffs": {score: -1, feedback: "And you never seemed to like what I did to you when you wore it."},
              "potato": {score: -1, feedback: "You looked so disappointed when I told you it wasn't a joke."},
              "trash": {score: -1, feedback: "You looked so disappointed when I told you it wasn't a joke."},
              "ring": {score: -1, feedback: "It was \"too much too soon,\" you said."},
              "typewriter": {score: 1, feedback: "You'll have more time when you're back from your book-signing."},
            }
          },
          {
            verse:"At everything you<br/>Tried your hand, excellence<br/>is what you achieved.",
            items: {
              "handcuffs": {score:-1, feedback: "But you never enjoyed it as much as me."},
              "potato": {score:1, feedback: "I could never match your skill in the kitchen."},
              "trophy": {score:1, feedback: "I was so proud of you when you won that."},
              "hammer": {score:1, feedback: "Your DIY skills were unparalleled."},
              "typewriter": {score:1, feedback: "I loved every story you wrote."},
              "books": {score: 1, feedback: "I loved every story you wrote."},
              "clothing": {score:-1, feedback: "Nobody has ever given a better strip-tease."},
              "trash": {score:-1, feedback: "Next to you, I'm trash."},
            }
          },
          {
            verse: "The first time we met,<br/>You were serving on me in<br/>That tiny diner.",
            items: {
              "clothing":{score:-1, feedback:"I couldn't wait to tear those clothes off you."},
              "potato":{score:1, feedback:"You served me a potato salad I still have dreams about."},
              "ring":{score:1, feedback:"It took all my effort not to propose there and then."},
              "trash":{score:-1, feedback:"Your food was trash, but I ate it anyway."},
              "trophy":{score:1, feedback:"You really were the best cook in that establishment."},
            }
          },
          {
            verse: "I knew I had to<br/>Get your telephone number<br/>Immediately.",
            items:{
              "clothing":{score:1, feedback:"I will never forget how angelic you looked that night."},
              "trash":{score:-1, feedback:"You tried to give me a fake number, but I saw right through that."},
              "flowers":{score:1, feedback:"I showed up to our first date carrying flowers for you."},
              "ring":{score:-1, feedback:"I proposed to you over the phone, but you rejected me the first time."},
            }
          },
          {
            verse: "The day we became<br/>A married couple, forever<br/>Will remain perfect.",
            items:{
              "clothing":{score:1, feedback:"You looked so beautiful."},
              "ring":{score:1, feedback:"I bought the most expensive ring I could afford."},
              "wrecking":{score:1, feedback:"Nothing could have wrecked it."},
              "flowers":{score:1, feedback:"You were as pretty as a flower."},
              "trash":{score:-1, feedback:"Until I hit the bar and got trashed."},
              "handcuffs":{score:-1, feedback:"\"Until death do we part.\""},
            }
          }, */
          {
            verse: "Lately you became<br/>Anxious that we would lose what<br/>We made together.",
            items:{
              "wrecking":{score:-1, feedback:"I was wrecking everything."},
              "flowers":{score:1, feedback:"I did my best to mend things."},
              "hammer":{score:1, feedback:"I did my best to mend things."},
              "handcuffs":{score:-1, feedback:"I couldn't let you escape."},
              "trophy":{score:0, feedback:"You were always the best..."},
            },
          },
        ],
        start: "This is our story",
        end: {
          verse: "Here, I'm restless.<br/>Here, I may sleep no more.<br/>I must leave this place.",
          item: "bed"
        },
        endings:[
          {
            text: "I already look forward to our time together with our new arrival. What a family we'll make!",
            offset: {x:120, y:320},
            img: "Client/resources/teddy.png"
          },
          {
            text: "We're happy together, and our story isn't over. We've even found a place to call our own.", 
            offset: {x:200, y:320},
            img: "Client/resources/housekey.png"
          },
          {
            text: "I'm glad I did that, this room really needed a clean.",
            offset: {x:250, y:330},
            img: "Client/resources/vacuum.png"
          },
          {
            text: "I miss you. <br /> Without you, without a job, I'm not sure I can cope anymore...",
            offset: {x:150, y:320},
            img: "Client/resources/bills.png" 
          },
          {
            text: "They'll never find your body.", 
            offset: {x:150, y:320},
            img: "Client/resources/knife.png"
          },
        ],
        credits: 'Thankyou for playing <em>Less</em>.<br /><br />You have just experienced one of five alternative endings, <a href="#" onclick="location.reload()">play again</a> to experience the others.<br /><br /><em>Less</em> was lovingly crafted by <a href="http://twitter.com/tccoxon" onclick="location.reload()">Tom Coxon</a> and <a href="http://twitter.com/fractallambda" onclick="location.reload()">Brice Fernandes</a><br /><br /> '
      }
    );
  });
  
  </script>


</body>
</html>
